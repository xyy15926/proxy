---
title: 数据抽样
tags:
  - 统计
categories:
  - 统计
date: 2019-03-21 17:27:15
updated: 2019-02-17 11:57:08
toc: true
mathjax: true
comments: true
description: 数据抽样
---

-	抽样作用
	-	提高速度、效率，将精力放在建立模型、选择模型上
	-	帮助分析特殊性问题：有些问题涉及到破坏性试验，抽取
		产品的一部分做耐用性实验经济有效
	-	降低成本：合理抽样可以保证在大部分信息不丢失情况下，
		降低数据采集、社会调查成本
-	大数据分析和抽样不矛盾
	-	从效率、成本角度看，适当、合理抽样有必要
	-	数据越多信息越丰富、数据量尽量多为好
	-	抽样可以降低求解的时空代价，但是可能会丢失部分信息
		，可能会使分析结果产生偏差
	-	在分析阶段如果抽样误差能够接受，占用空间小、速度快
		，完全可以抽样
-	抽样应充分考虑数据整体结果
	-	抽样数据应和原数据集之间相似度较高
	-	样本容量越大，和原数据集的相似程度越好，样本质量越高
	-	高质量样本数据挖掘结果与原数据集挖掘结果一致性更好，
		即挖掘准确性越高
-	大样本!=总体，理论上再大的局部抽样可以不如随机抽样有代表性

##	抽样样本代表性

样本容量、样本质量是衡量抽样样本的两个最重要因素

-	样本容量：抽样过程中抽取的样本数
-	样本质量：衡量抽样样本的代表性

###	样本质量

抽样样本与整体的相似性

$$
\begin{equation}
J(S, D) = \frac {1} {D} \sum_{k=1}^{r} J_{k}(S, D) \\
J_{k}(S, D) = \sum_{j=1}^{N_k}(P_{Sj} - P_{Dj}) log \frac {P_{Sj}} {P_{Dj}} \\
Q(s) = exp(-J)
\end{equation}
$$

-	$D$：数据集，包含$r$个属性
-	$S$：抽样样本集
-	$J_k=J(S, D)$：*Kullblack-Laible*信息量，数据集$S$、$D$
	在属性$k$上偏差程度
-	$Q(S)$：抽样集$S$在数据集$D$中的质量

说明：

-	若整体$D$分布稀疏，容易得到$S$在某些数据点观测值个数
	为0，得到$I(S, D) \rightarrow infty$，此时可以把该点
	和附近的点频率进行合并，同时调整总体频率分布，但是
	这样会导致不能有效衡量数据集局部差异性，不宜过度合并
-	对于连续型变量
	-	可以把变量进行适当分组，此方法比较粗糙，不利于
		刻画数据集直接的局部差异
	-	计算数据集各个取值点的非参估计，如核估计、最近邻
		估计等，再再公式中用各自的非参估计代替相应频率，
		计算样本质量
-	数据包含多个指标时，可以用多个指标的平均样本质量衡量整体
	样本质量，也可以根据指标重要程度，设置不同的权重

显然

-	$J(S,D)$越小，抽样集$S$、数据集$D$之间存在的偏差越小，
	$Q(S)=exp(-J)$越大，样本集$S$质量越好
-	$0<Q<1$
	-	$Q=1$意味样本集$S$和数据集$D$之间没有偏差，具有最好
		样本质量
	-	$Q=0$则样本集$S$、数据集$D$完全不相似，具有最差样本
		质量

###	样本容量

样本量是决定抽样后挖掘分析准确性、效率的重要因素之一

-	样本量大、质量好、准确性高，但计算效率低
-	样本质量差、准确性低、计算效率高
-	样本质量提高不是线性的，高位样本容量上，边际效用往往较低
-	同一样本容量的不同样本的样本质量也会有差异，即样本质量
	不是样本容量的单调函数，而是多了一项随机扰动

####	SOSS

统计最优样本数：Statistical Optimal Sample Size

1.	输入：数据集$D$，包含N个实例
2.	根据某种抽样方法，随机产生R个样本容量分别为
	$n_i (n_i \in [1, N])$的样本$S$
	-	较小取值$n_i$应该密度比较大，因为随着$n_i$增加，
		样本质量趋近1，不需要太多样本
	-	可以考虑使用指数序列产生在较大值稀疏的序列作为$n_i$
		序列的取值
3.	计算每个样本$S$在数据集$D$中的样本质量$Q$，并计算各个
	样本容量对应的样本质量均值$\bar {Q_{n}}$
4.	根据点$(n, \bar {Q_{n}})$画出曲线
5.	根据给定的样本质量要求，在样本容量对应样本质量的曲线上
	确定近似的最优样本容量



