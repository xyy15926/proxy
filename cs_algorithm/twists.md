---
title: 代码
tags:
  - 算法
categories:
  - 算法
date: 2019-04-05 21:50:53
updated: 2019-04-05 21:50:53
toc: true
mathjax: true
comments: true
description: 代码
---

##	综述

###	代码结构

-	保持程序设计风格：把经常使用的工具性代码编辑成已验证

-	用规范的格式处理、保存数据

-	区分代码与数据：与代码无关的数据应该尽可能区分开来，尽量
	把数据保存在常量数组中

##	逻辑

###	运算符

-	忽略运算符优先级

-	`=`结合不等号

	-	同时使用`<=`、`>=`，容易造成死循环、遗漏等
	-	尽量只使用`>=`号，不再使用`<=`号

###	循环

####	比较作为循环终止条件

终止条件保证**精确**处理**所有**数据，不缺漏、不重复

-	`>/<`、`n/n-1`的选用

####	两端同时进行迭代操作

> - 保证退出循环
> - 所有值均被检验

-	先处理数据再移动指针：**指针交错停止处理**
	-	此时指针所在位置没有被处理
	-	需要等待指针交错才能保证全部被处理

-	先移动指针再处理数据：**指针重合停止处理**
	-	指针所在位置已经被处理
	-	但是指针没有被常量移动，需要考虑循环终止条件

> - 由于整数除法舍去小数，死循环时左侧指针位置总会被处理
> - 具体参见*binary_search*

###	递归终止条件

递归终止条件主要有两种设计方案

-	最后元素：判断元素是否是最后元素，终止递归调用

-	空（无效）元素：判断元素是空（无效）元素，终止递归调用
	-	需要确保最终能够进入该分支，而不是停止在最后一步

##	基本数据类型

###	整数

####	变量初值问题

#todo

####	运算溢出

-	正数：边界值`1`、`0x7FFF FFFF`、`0xFFFF FFFF`
-	负数：边界值`0x8000 0000`、`0xFFFF FFFF`
-	忽略语言特性：如`long`类型常量不加`LL`

####	0值未考虑

#todo

###	浮点数

-	浮点取整
	-	同样尽量避免混用使用向上取整、向下取整
	-	尽量使用向下取整（这也是很多整型除法默认方式）

-	浮点型相等比较
	-	不能使用`==`，应该使用相差`<`某常数

##	线性数据类型

###	长度为1

-	循环终止条件`l.size() - 1`时被忽略，无法正确处理

	```c
	for(size_t i=0; i < s.size()-1; ++i)
		// 容易忽略的写法

	for(size_t i=0; i < s.size(); ++i)
		// 较好的写法，在内部处理逻辑
	```

###	范围意义混乱

-	明确是否包括端点：确定使用**左闭右开**区间、**闭**区间

-	明确末端点：空闲位置、存储有效值

	-	队列、栈插入元素：末端点处为空闲位置，可直接使用
	-	数组迭代比较：末端点处存储有效值，先比较再更新指针

###	边界控制

-	数组访问越界

####	限位器

在数据端点添加的**标记**数据，指示“指针”已经到达数据端点，
将循环中的判断条件合并

-	数组末尾添加查找键：在顺序查找中可以将判断数组越界、
	查找键比较合并

-	数组0分量

##	树、二叉树

###	空树、只有根元素

```c
node.val = value;
	# 未考虑空树
```

-	在递归代码中可能会忽略，终止条件、递归调用条件之间
	配合不完善
	#todo

###	只有左子树、右子树

##	I/O

###	文件边界条件

-	首个字符
-	最末字符、倒数第二个字符

###	I/O速度

-	输入输出方式过慢：`cin`等高级输入、输出方式比较慢

##	程序栈

-	栈溢出：数组等大局部变量保存到栈，少量递归即会发生栈溢出

##	代码测试技巧

###	输入、输出

将输入、输出流重定向到文件中，避免频繁测试时频繁输入

-	输入放在`in.txt`文件中
-	输出到`out.txt`中
-	输出执行时间

####	C/C++

```cpp
#ifdef SUBMIT
freopen("in.txt", "r", stdin);
	// input data
freopen("out.txt", "w", stdout);
	// output
long _begin_time = clock();
#endif

// put code here

#ifdef SUBMIT
long _end_time = clock();
printf("time = %ld ms\n", _end_time - begin_time);
#endif
```

####	Python

```python
import sys
import time
sys.stdin = open("in.txt", "r")
sys.stdout = open("out.txt", "w")
__tstart = time.time()

 # code here

__trange = time.time() - __tstart
print("time used: %f" % __trange)
```







